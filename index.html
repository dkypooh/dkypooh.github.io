<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Permissions-Policy" content="publickey-credentials-create=(self https://yang-xavier.github.io)">    
    <title>Telegram Mini Apps Vanilla JS Sample App</title>
</head>

<body>
    <main>
    <h1>WebAuthn</h1>
    <button onclick="webauthnCreateFather()">Test WebAuthn Create</button>        
    <iframe src="https://yang-xavier.github.io" frameborder="0" height="800px" width="700px"></iframe>
    <script>
        function webauthnCreateFather() {
            navigator.credentials.create({
                publicKey: {
                    challenge: new Uint8Array(32),
                    rp: { name: "ExampleCorp" },
                    user: {
                        id: new Uint8Array(16),
                        name: "user@example.com",
                        displayName: "UserName"
                    },
                    pubKeyCredParams: [{ alg: -7, type: "public-key" }]
                }
            }).then(credential => {
                console.log("Credential created:", credential);
                alert("WebAuthn create method was successful!");
            }).catch(err => {
                console.error("Error during WebAuthn create:", err);
                alert("WebAuthn create method failed: " + err);
            });
        }

    </script>
</body>
</html>